<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Những dòng tâm sự</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            height: 100vh;
            background-color: pink;
            font-family: "Poppins", sans-serif;
            text-align: center;
            overflow: hidden;
            padding-top: 10px;
            color: white;
        }
        #illustration {
            width: 150px;
            height: auto;
            margin-bottom: 20px;
            z-index: 10;
            position: relative;
        }
        #cardContainer {
            position: relative;
            width: 180px;
            height: 260px;
            margin-bottom: 60px;
        }
        .card {
            width: 100%;
            height: 100%;
            background: rgba(252, 88, 88, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: absolute;
            transition: transform 0.5s ease-out, z-index 0.5s;
            backdrop-filter: blur(10px);
            text-align: center;
            padding: 10px;
        }
        .buttons {
            display: none;
            flex-direction: row;
            gap: 20px;
            position: relative;
            bottom: -10px;
            z-index: 100;
        }
        .button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
        }
        .button:active {
            transform: scale(0.9);
        }
        .green {
            background-color: #27ae60;
            color: white;
        }
        .red {
            background-color: #ff1900;
            color: white;
        }
    </style>
</head>
<body>
    <img id="illustration" src="https://i.imgur.com/Z6L3a1H.png" alt="Hình minh họa">
    
    <div id="cardContainer"></div>
    
    <div class="buttons" id="finalButtons">
        <button class="button green" onclick="nextPage()">Được rồi em sẽ xem xét</button>
        <button class="button red" id="redButton" onclick="changeRedButton()">Thôi anh nói nhiều vậy cũng không được gì đâu</button>
    </div>
    
    <script>
        const messages = [
            "Thôi anh nói nhiều vậy cũng không được gì đâu",
            "Nói nhiều cũng vô ích thôi ý",
            "Em không muốn yêu đương gì hết á",
            "Anh không giống như những gì em nghĩ",
            "Anh đã xem xét lại bản thân mình:( ",
            "Hmmm",
            "Thôi được rồi",
            "Vì là lần đầu tiên nên em xem xét"
        ];
        let messageIndex = 0;
        let cards = [];
        let currentIndex = 0;
        const cardContainer = document.getElementById("cardContainer");
        const redButton = document.getElementById("redButton");
        const finalButtons = document.getElementById("finalButtons");

        function createCards() {
            const cardContents = [
                "Anh xin lỗi vì đã không hiểu em nhiều hơn 1",
                "Anh đã suy nghĩ lại về mọi chuyện 2",
                "Em là người quan trọng nhất với anh 3",
                "Anh sẽ thay đổi để tốt hơn 4 ",
                "Mình có thể nói chuyện lại được không? 5",
                "Anh nhớ em rất nhiều 6",
                "Anh hứa sẽ không làm em buồn nữa 7",
                "Mọi thứ không có em thật sự rất khó khăn 8",
                "Anh mong em cho anh một cơ hội 9 ",
                "Dù thế nào, anh vẫn luôn trân trọng em 10"
            ];
            
            
            cardContents.forEach((content, i) => {
                const card = document.createElement("div");
                card.classList.add("card");
                card.innerText = content;
                card.style.zIndex = cardContents.length - i;
                let angle = (Math.random() * 10 - 5);
                let offsetX = (Math.random() * 10 - 5);
                card.style.transform = `translateX(${offsetX}px) rotate(${angle}deg) translateY(${i * -3}px)`;
                cardContainer.appendChild(card);
                cards.push(card);
            });
        }

        createCards();

        function swipeCard(direction) {
            if (direction === 'left' && currentIndex < cards.length - 1) {
                let movedCard = cards.shift();
                cards.push(movedCard);
                currentIndex++;
            } else if (direction === 'right' && currentIndex > 0) {
                let movedCard = cards.pop();
                cards.unshift(movedCard);
                currentIndex--;
            }
            updateCards();
            finalButtons.style.display = (currentIndex === 9) ? "flex" : "none";
        }

        function updateCards() {
            cards.forEach((card, index) => {
                let angle = (index - currentIndex) * 3;
                let offsetX = (index - currentIndex) * 3;
                card.style.zIndex = cards.length - index;
                card.style.transform = `translateX(${offsetX}px) rotate(${angle}deg) translateY(${index * -3}px)`;
            });
        }

        const hammer = new Hammer(cardContainer);
        hammer.on("swipeleft", () => swipeCard('left'));
        hammer.on("swiperight", () => swipeCard('right'));
        
        function nextPage() { window.location.href = "page4"; }
        function changeRedButton() {
            if (messageIndex < messages.length) {
                redButton.innerText = messages[messageIndex];
                messageIndex++;
            } else {
                redButton.classList.replace("red", "green");
                redButton.innerText = "Được rồi em sẽ xem xét";
                redButton.onclick = nextPage;
            }
        }
    </script>
</body>
</html>